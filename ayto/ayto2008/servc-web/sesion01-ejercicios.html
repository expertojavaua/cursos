<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7">
<meta name="Forrest-skin-name" content="pelt">
<title>Ejercicios de introducci&oacute;n a los Servicios Web</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<div class="header">
<div class="grouplogo">
<a href="http://www.jtech.ua.es/j2ee"><img class="logoImage" alt="jtech" src="images/baner_j2ee_izq.gif" title="Especialista Universitario Java Enterprise"></a>
</div>
<div class="projectlogoA1">
<a href="http://www.dccia.ua.es/"><img class="logoImage" alt="Servicios Web" src="images/baner_j2ee_der.gif" title="Servicios Web"></a>
</div>
<ul id="tabs">
<li>
<a class="base-not-selected" href="javascript:location.href='../index.html'">Home</a>
</li>
<li>
<a class="base-not-selected" href="javascript:location.href='../aplic-web.html'">Aplicaciones Web</a>
</li>
<li>
<a class="base-not-selected" href="javascript:location.href='../aplic-ent.html'">Aplicaciones Enterprise</a>
</li>
<li>
<a class="base-not-selected" href="javascript:location.href='../charlas.html'">Charlas</a>
</li>
<li>
<a class="base-not-selected" href="javascript:location.href='../proy-int/index.html'">Proyecto</a>
</li>
<li class="current">
<a class="base-selected" href="index.html">Servicios Web</a>
</li>
</ul>
</div>
</div>
<div id="main">
<div id="publishedStrip">
<div id="level2tabs"></div>
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="breadtrail">
             
             &nbsp;
           </div>
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', 'skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Servicios Web</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="index.html" title="Servicios Web">&Iacute;ndice</a>
</div>
<div onclick="SwitchMenu('menu_1.1.2', 'skin/')" id="menu_1.1.2Title" class="menutitle">Teor&iacute;a</div>
<div id="menu_1.1.2" class="menuitemgroup">
<div class="menuitem">
<a href="sesion01-apuntes.html">Sesion 1</a>
</div>
<div class="menuitem">
<a href="sesion02-apuntes.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-apuntes.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-apuntes.html">Sesion 4</a>
</div>
<div class="menuitem">
<a href="roadmap-apuntes.html" title="Roadmap">Roadmap</a>
</div>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.3', 'skin/')" id="menu_selected_1.1.3Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Ejercicios</div>
<div id="menu_selected_1.1.3" class="selectedmenuitemgroup" style="display: block;">
<div class="menupage">
<div class="menupagetitle">Sesion 1</div>
</div>
<div class="menuitem">
<a href="sesion02-ejercicios.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-ejercicios.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-ejercicios.html">Sesion 4</a>
</div>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<div id="credit2"></div>
</div>
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="sesion01-ejercicios.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Ejercicios de introducci&oacute;n a los Servicios Web</h1>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Cliente+para+servicio+web+Hola+Mundo">Cliente para servicio web Hola Mundo</a>
</li>
<li>
<a href="#Clientes+para+servicios+web+de+la+UA+%28*%29">Clientes para servicios web de la UA (*)</a>
</li>
<li>
<a href="#Servicios+web+de+Amazon+%28*%29">Servicios web de Amazon (*)</a>
</li>
</ul>
</div>


<a name="N1000C"></a><a name="Cliente+para+servicio+web+Hola+Mundo"></a>
<h2 class="underlined_10">Cliente para servicio web Hola Mundo</h2>
<div class="section">
<p>Vamos a probar un cliente para un servicio web sencillo. Se trata 
  de un <em>"Hola mundo!"</em> en forma de servicio. Podemos encontrar el documento WSDL
  que define este servicio en la direcci&oacute;n <span class="codefrag">http://jtech.ua.es/HolaMundo/wsdl/HolaMundoSW.wsdl</span>. Se pide:</p>
<p>
<em>a) </em> Observar el documento WSDL e identificar los diferentes elementos que contiene. &iquest;Qu&eacute; operaciones
ofrece el servicio? &iquest;Qu&eacute; datos de entrada y de salida tiene cada una de ellas?.</p>
<p>
<em>b)</em> Ejecutar el servicio mediante <em>Web Services Explorer</em>. Observar los mensajes SOAP
utilizados para la invocaci&oacute;n del servicio.</p>
<p>
<em>c) </em> Crear en Eclipse un proyecto Java <span class="codefrag">servcweb-sesion01-hola</span>, y crear en &eacute;l un cliente
para el servicio.</p>
</div>



<a name="N10031"></a><a name="Clientes+para+servicios+web+de+la+UA+%28*%29"></a>
<h2 class="underlined_10">Clientes para servicios web de la UA (*)</h2>
<div class="section">
<p>La Universidad de Alicante ofrece una serie de servicios web que nos dan acceso a informaci&oacute;n sobre 
	las asignaturas, sus horarios, etc. Vamos a crear un cliente para acceder a estos servicios. Se pide:</p>
<p>
<em>a)</em> Podemos consultar la documentaci&oacute;n de los servicios y tener acceso a sus documentos WSDL en 
	la web <span class="codefrag">http://cv1.cpd.ua.es/ws/</span>. Vamos a abrir el documento WSDL correspondiente a los servicios
	de dominio p&uacute;blico (se encuentra en la secci&oacute;n <em>Serv. Inform&aacute;tica</em>) de la web. &iquest;Qu&eacute; tipo de
	codificaci&oacute;n utiliza este servicio? &iquest;Esta codificaci&oacute;n est&aacute; soportada por los est&aacute;ndares actuales
	de servicios web (WS-I)? &iquest;Estar&aacute; soportada por JAX-WS? Si no fuese as&iacute;, &iquest;qu&eacute; tendr&iacute;amos que hacer si
	queremos crear un cliente para el servicio?</p>
<p>
<em>b)</em> Probar el servicio mediante <em>Web Services Explorer</em>. Podemos invocar por ejemplo
	la operaci&oacute;n <span class="codefrag">wshorarios</span>. Los c&oacute;digos de las asignaturas figuran en la web de la Universidad, podr&iacute;amos
	utilizar por ejemplo el c&oacute;digo <span class="codefrag">9181</span> que corresponde a la asignatura <em>Ingenier&iacute;a del
	Software 2</em>. Observar el contenido de los mensajes SOAP de petici&oacute;n y respuesta.</p>
<p>
<em>c)</em> Generar el cliente del servicio en un nuevo proyecto Java al que llamaremos 
	<span class="codefrag">servcweb-sesion01-ua</span>, e invocar dentro de &eacute;l el m&eacute;todo para obtener los horarios de una asignatura 
	(<span class="codefrag">wshorarios</span>).</p>
</div>


<a name="N10062"></a><a name="Servicios+web+de+Amazon+%28*%29"></a>
<h2 class="underlined_10">Servicios web de Amazon (*)</h2>
<div class="section">
<p>Vamos a realizar un cliente que acceda a los Servicios Web que ofrece <em>Amazon.com</em> para 
  	realizar b&uacute;squedas de productos en esta tienda, dentro de un proyecto Java de nombre
  	<span class="codefrag">servcweb-sesion01-amazon</span>. Este es un servicio bastante m&aacute;s complejo que los anteriores, por lo 
    que necesitaremos documentaci&oacute;n adicional para crear nuestro cliente. 
    Podemos obtener documentaci&oacute;n sobre estos servicios en la direcci&oacute;n:</p>
<pre class="code">http://aws.amazon.com</pre>
<p>Para utilizar estos servicios necesitaremos registrarnos como desarrolladores, y obtener 
	un c&oacute;digo (<em>token</em>) que nos identifique 
  	cuando utilizamos los servicios de <em>Amazon</em>. Este c&oacute;digo puede 
  	ser obtenido en la p&aacute;gina anterior.</p>
<div class="frame note">
<div class="label">Nota</div>
<div class="content">Para las pruebas que vamos a realizar no es necesario obtener 
  	dicho c&oacute;digo, ya que a continuaci&oacute;n se proporciona uno
  	en el fragmento de c&oacute;digo de ejemplo.</div>
</div>
<p>Generar el cliente del servicio Amazon en Netbeans a partir del documento WSDL que lo define. Vamos a utilizar el servicio 
  	<em>Amazon E-Commerce Service</em>, cuyo documento WSDL puede ser consultado directamente 
  	en la direcci&oacute;n:</p>
<pre class="code">webservices.amazon.com/AWSECommerceService/AWSECommerceService.wsdl</pre>
<div class="frame warning">
<div class="label">Importante</div>
<div class="content">Este servicio web no es compatible con la API JAX-RPC 1.1 que
 usa Axis, por lo que no podremos invocarlo con estas librer&iacute;as.</div>
</div>
<p>Invocar desde el cliente la operaci&oacute;n <span class="codefrag">itemSearch</span> para hacer una b&uacute;squeda de art&iacute;culos. 
	Concretamente los art&iacute;culos que buscaremos ser&aacute;n DVDs, y realizaremos una b&uacute;squeda por director. Dado que
	la API de Amazon es bastante compleja, a continuaci&oacute;n se muestra el c&oacute;digo que deber&iacute;amos utilizar para
	invocar esta operaci&oacute;n (se proporciona un <em>token</em> de desarrollador para que no sea necesario registrarse
	en la web):</p>
<pre class="code">String marketplaceDomain = null;
String awsAccessKeyId = "15JCR9XWMPTGV91JC1R2";
String subscriptionId = null;
String associateTag = null;
String xmlEscaping = null;
String validate = null;
ItemSearchRequest shared = null;
List&lt;ItemSearchRequest&gt; request = null;
Holder&lt;OperationRequest&gt; operationRequest = null;
Holder&lt;List&lt;Items&gt;&gt; items = new Holder&lt;List&lt;Items&gt;&gt;();
            
shared = new ItemSearchRequest();
shared.setSearchIndex("DVD");
shared.setDirector("Kubrick");
shared.getResponseGroup().add("Offers");
shared.getResponseGroup().add("Medium");
            
port.<strong>itemSearch</strong>(marketplaceDomain, awsAccessKeyId, 
                subscriptionId, associateTag, xmlEscaping, 
                validate, shared, request, operationRequest, items);

List&lt;Items&gt; listaResultados = items.value;
for(Items resultado: listaResultados) {
    List&lt;Item&gt; listaArticulos = resultado.getItem();
    for(Item articulo: listaArticulos) {
        ItemAttributes atributos = articulo.getItemAttributes();
        System.out.println("Titulo: " + atributos.getTitle());

        List&lt;String&gt; directores = atributos.getDirector();
        for(String director: directores) {
            System.out.print(director + "; ");
        }

        System.out.println("Precio: " + 
            (atributos.getListPrice()!=null?
                atributos.getListPrice().getFormattedPrice():
                "no disponible"));
    }
}</pre>
<div class="frame warning">
<div class="label">&iexcl;Cuidado!</div>
<div class="content">Seleccionar <span class="codefrag">imports</span> incorrectos al introducir este c&oacute;digo puede hacer
que no compile correctamente. Todos los artefactos que representan los objetos de Amazon pertenecer&aacute;n al
paquete en el que se ha generado el <em>stub</em>.</div>
</div>
<p>Ejecutar la aplicaci&oacute;n y comprobar que obtiene correctamente la lista de pel&iacute;culas.</p>
</div>


<p class="pageBreakAfter"></p>


</div>
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2008-2009 Depto. CCIA</div>
</div>
</body>
</html>
